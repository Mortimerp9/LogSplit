<!DOCTYPE html><html lang="en"><head><title>src/test/scala/net/pierreandrews/ParserTest</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../../"><meta name="groc-document-path" content="src/test/scala/net/pierreandrews/ParserTest"><meta name="groc-project-path" content="src/test/scala/net/pierreandrews/ParserTest.scala"><meta name="groc-github-url" content="https://github.com/Mortimerp9/LogSplit"><link rel="stylesheet" type="text/css" media="all" href="../../../../../assets/style.css"><script type="text/javascript" src="../../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/Mortimerp9/LogSplit/blob/master/src/test/scala/net/pierreandrews/ParserTest.scala">src/test/scala/net/pierreandrews/ParserTest.scala</a></div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-keyword">package</span> net.pierreandrews

<span class="hljs-keyword">import</span> org.joda.time.<span class="hljs-type">DateTime</span>
<span class="hljs-keyword">import</span> org.scalatest._</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Basic test for the parser, uses the examples from the instructions</p>
<p>User: pierre
Date: 11/28/14</p></div></div><div class="code"><div class="wrapper"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParserTest</span> <span class="hljs-keyword"><span class="hljs-keyword">extends</span></span> <span class="hljs-title">FunSuite</span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-title">Matchers</span> {</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>very basic unit test based on example.</p></div></div><div class="code"><div class="wrapper">  test(<span class="hljs-string">"parse line"</span>) {
    <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">lines</span> =</span> <span class="hljs-type">Seq</span>(<span class="hljs-string">"""177.126.180.83 - - [15/Aug/2013:13:54:38 -0300] "GET /meme.jpg HTTP/1.1" 200 2148 "-" "userid=5352b590-05ac-11e3-9923-c3e7d8408f3a"""</span><span class="hljs-string">",
      "</span><span class="hljs-string">""</span><span class="hljs-number">177.126</span><span class="hljs-number">.180</span><span class="hljs-number">.83</span> - - [<span class="hljs-number">15</span>/<span class="hljs-type">Aug</span>/<span class="hljs-number">2013</span>:<span class="hljs-number">14</span>:<span class="hljs-number">54</span>:<span class="hljs-number">38</span> -<span class="hljs-number">0300</span>] <span class="hljs-string">"GET /lolcats.jpg HTTP/1.1"</span> <span class="hljs-number">200</span> <span class="hljs-number">5143</span> <span class="hljs-string">"-"</span> <span class="hljs-string">"userid=f85f124a-05cd-11e3-8a11-a8206608c529"</span><span class="hljs-string">""",
      """</span><span class="hljs-number">177.126</span><span class="hljs-number">.180</span><span class="hljs-number">.83</span> - - [<span class="hljs-number">15</span>/<span class="hljs-type">Aug</span>/<span class="hljs-number">2013</span>:<span class="hljs-number">13</span>:<span class="hljs-number">57</span>:<span class="hljs-number">48</span> -<span class="hljs-number">0300</span>] <span class="hljs-string">"GET /lolcats.jpg HTTP/1.1"</span> <span class="hljs-number">200</span> <span class="hljs-number">5143</span> <span class="hljs-string">"-"</span> <span class="hljs-string">"userid=5352b590-05ac-11e3-9923-c3e7d8408f3b"</span><span class="hljs-string">""",
      """</span><span class="hljs-number">177.126</span><span class="hljs-number">.180</span><span class="hljs-number">.83</span> - - [<span class="hljs-number">1513</span>:<span class="hljs-number">57</span>:<span class="hljs-number">48</span> -<span class="hljs-number">0300</span>] <span class="hljs-string">"GET /lolcats.jpg HTTP/1.1"</span> <span class="hljs-number">200</span> <span class="hljs-number">5143</span> <span class="hljs-string">"-"</span> <span class="hljs-string">"userid=5352b590-05ac-11e3-9923-345235324"</span><span class="hljs-string">""",
      """</span><span class="hljs-number">177.126</span><span class="hljs-number">.180</span><span class="hljs-number">.83</span> - - [<span class="hljs-number">16</span>/<span class="hljs-type">Dec</span>/<span class="hljs-number">2013</span>:<span class="hljs-number">13</span>:<span class="hljs-number">57</span>:<span class="hljs-number">48</span> -<span class="hljs-number">0300</span>] <span class="hljs-string">"GET /lolcats.jpg HTTP/1.1"</span> <span class="hljs-number">200</span> <span class="hljs-number">5143</span> <span class="hljs-string">"-"</span> <span class="hljs-string">"userid=5352b590-05ac-1"</span><span class="hljs-string">""</span>)

    <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">expectedDates</span> =</span> <span class="hljs-type">Seq</span>(<span class="hljs-keyword">new</span> <span class="hljs-type">DateTime</span>(<span class="hljs-number">1376585678000</span>L), <span class="hljs-keyword">new</span> <span class="hljs-type">DateTime</span>(<span class="hljs-number">1376589278000</span>L), <span class="hljs-keyword">new</span> <span class="hljs-type">DateTime</span>(<span class="hljs-number">1376585868000</span>L), <span class="hljs-keyword">new</span> <span class="hljs-type">DateTime</span>(<span class="hljs-number">1387213068000</span>L))

    <span class="hljs-function"><span class="hljs-keyword">val</span> <span class="hljs-title">expectedUsers</span> =</span> <span class="hljs-type">Seq</span>(<span class="hljs-string">"5352b590-05ac-11e3-9923-c3e7d8408f3a"</span>,
      <span class="hljs-string">"f85f124a-05cd-11e3-8a11-a8206608c529"</span>,
      <span class="hljs-string">"5352b590-05ac-11e3-9923-c3e7d8408f3b"</span>,
      <span class="hljs-string">"5352b590-05ac-11e3-9923-345235324"</span>)

    lines.map(<span class="hljs-type">Parser</span>.extractDate).flatten should contain only (expectedDates: _*)
    lines.map(<span class="hljs-type">Parser</span>.extractUser).flatten should contain only (expectedUsers: _*)

  }
}</div></div></div></div></body></html>