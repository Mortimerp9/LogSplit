<!DOCTYPE html><html lang="en"><head><title>test/scala/net/pierreandrews/ParserTest</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../"><meta name="groc-document-path" content="test/scala/net/pierreandrews/ParserTest"><meta name="groc-project-path" content="src/test/scala/net/pierreandrews/ParserTest.scala"><link rel="stylesheet" type="text/css" media="all" href="../../../../assets/style.css"><script type="text/javascript" src="../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path">src/test/scala/net/pierreandrews/ParserTest.scala</div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper">package net<span class="hljs-class">.pierreandrews</span>

import org<span class="hljs-class">.joda</span><span class="hljs-class">.time</span><span class="hljs-class">.DateTime</span>
import org<span class="hljs-class">.scalatest</span>._</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Basic test for the parser, uses the examples from the instructions</p>
<p>User: pierre
Date: 11/28/14</p></div></div><div class="code"><div class="wrapper"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParserTest</span> <span class="hljs-keyword"><span class="hljs-keyword">extends</span></span> <span class="hljs-title">FunSuite</span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-title">Matchers</span> {</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>very basic unit test based on example.</p></div></div><div class="code"><div class="wrapper">  test(<span class="hljs-string">"parse line"</span>) {
    val <span class="hljs-variable">lines =</span> Seq(<span class="hljs-string">""</span><span class="hljs-string">"177.126.180.83 - - [15/Aug/2013:13:54:38 -0300] "</span>GET /meme.jpg HTTP/<span class="hljs-number">1.1</span><span class="hljs-string">" 200 2148 "</span>-<span class="hljs-string">" "</span><span class="hljs-variable">userid=</span><span class="hljs-number">5352</span>b590-<span class="hljs-number">05</span>ac-<span class="hljs-number">11</span>e3-<span class="hljs-number">9923</span>-c3e7d8408f3a<span class="hljs-string">""</span><span class="hljs-string">""</span>,
      <span class="hljs-string">""</span><span class="hljs-string">"177.126.180.83 - - [15/Aug/2013:14:54:38 -0300] "</span>GET /lolcats.jpg HTTP/<span class="hljs-number">1.1</span><span class="hljs-string">" 200 5143 "</span>-<span class="hljs-string">" "</span><span class="hljs-variable">userid=</span>f85f124a-<span class="hljs-number">05</span>cd-<span class="hljs-number">11</span>e3-<span class="hljs-number">8</span>a11-a8206608c529<span class="hljs-string">""</span><span class="hljs-string">""</span>,
      <span class="hljs-string">""</span><span class="hljs-string">"177.126.180.83 - - [15/Aug/2013:13:57:48 -0300] "</span>GET /lolcats.jpg HTTP/<span class="hljs-number">1.1</span><span class="hljs-string">" 200 5143 "</span>-<span class="hljs-string">" "</span><span class="hljs-variable">userid=</span><span class="hljs-number">5352</span>b590-<span class="hljs-number">05</span>ac-<span class="hljs-number">11</span>e3-<span class="hljs-number">9923</span>-c3e7d8408f3b<span class="hljs-string">""</span><span class="hljs-string">""</span>,
      <span class="hljs-string">""</span><span class="hljs-string">"177.126.180.83 - - [1513:57:48 -0300] "</span>GET /lolcats.jpg HTTP/<span class="hljs-number">1.1</span><span class="hljs-string">" 200 5143 "</span>-<span class="hljs-string">" "</span><span class="hljs-variable">userid=</span><span class="hljs-number">5352</span>b590-<span class="hljs-number">05</span>ac-<span class="hljs-number">11</span>e3-<span class="hljs-number">9923</span>-<span class="hljs-number">345235324</span><span class="hljs-string">""</span><span class="hljs-string">""</span>,
      <span class="hljs-string">""</span><span class="hljs-string">"177.126.180.83 - - [16/Dec/2013:13:57:48 -0300] "</span>GET /lolcats.jpg HTTP/<span class="hljs-number">1.1</span><span class="hljs-string">" 200 5143 "</span>-<span class="hljs-string">" "</span><span class="hljs-variable">userid=</span><span class="hljs-number">5352</span>b590-<span class="hljs-number">05</span>ac-<span class="hljs-number">1</span><span class="hljs-string">""</span><span class="hljs-string">")

    val expectedDates = Seq(new DateTime(1376585678000L), new DateTime(1376589278000L), new DateTime(1376585868000L), new DateTime(1387213068000L))

    val expectedUsers = Seq("</span><span class="hljs-number">5352</span>b590-<span class="hljs-number">05</span>ac-<span class="hljs-number">11</span>e3-<span class="hljs-number">9923</span>-c3e7d8408f3a<span class="hljs-string">",
      "</span>f85f124a-<span class="hljs-number">05</span>cd-<span class="hljs-number">11</span>e3-<span class="hljs-number">8</span>a11-a8206608c529<span class="hljs-string">",
      "</span><span class="hljs-number">5352</span>b590-<span class="hljs-number">05</span>ac-<span class="hljs-number">11</span>e3-<span class="hljs-number">9923</span>-c3e7d8408f3b<span class="hljs-string">",
      "</span><span class="hljs-number">5352</span>b590-<span class="hljs-number">05</span>ac-<span class="hljs-number">11</span>e3-<span class="hljs-number">9923</span>-<span class="hljs-number">345235324</span><span class="hljs-string">")

    lines.map(Parser.extractDate).flatten should contain only (expectedDates: _*)
    lines.map(Parser.extractUser).flatten should contain only (expectedUsers: _*)

  }
}
</span></div></div></div></div></body></html>